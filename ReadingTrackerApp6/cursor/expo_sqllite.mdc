---
description: 
globs: 
alwaysApply: true
---
ì•„ë˜ëŠ” ìµœì‹  Expo ê³µì‹ ë¬¸ì„œ([expo-sqlite ê³µì‹ ë¬¸ì„œ](https://docs.expo.dev/versions/latest/sdk/sqlite/)) ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•œ  
**expo-sqlite ì‚¬ìš©ë²• ìš”ì•½ ë° ì‹¤ì „ ì˜ˆì‹œ ë¬¸ì„œ**ì…ë‹ˆë‹¤.

---

# ğŸ“„ @expo_sqlite.mdc â€” Expo SQLite ì‚¬ìš©ë²• ê°€ì´ë“œ

## 1. ì„¤ì¹˜

```sh
npx expo install expo-sqlite
```

---

## 2. ê¸°ë³¸ ì‚¬ìš©ë²•

### 2.1. ëª¨ë“ˆ ì„í¬íŠ¸

```ts
import * as SQLite from 'expo-sqlite';
```

### 2.2. ë°ì´í„°ë² ì´ìŠ¤ ì—´ê¸°

```ts
const db = await SQLite.openDatabaseAsync('mydb.db');
```
- `openDatabaseAsync`ëŠ” Promiseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- ê¸°ì¡´ ë°©ì‹(`SQLite.openDatabase`)ì€ deprecatedì´ë©°, ìµœì‹  Expoì—ì„œëŠ” async ë°©ì‹ ê¶Œì¥.

---

## 3. í…Œì´ë¸” ìƒì„± ë° ì¿¼ë¦¬ ì‹¤í–‰

### 3.1. í…Œì´ë¸” ìƒì„±

```ts
await db.execAsync(`
  CREATE TABLE IF NOT EXISTS books (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    author TEXT
  );
`);
```

### 3.2. ë°ì´í„° ì‚½ì…

```ts
await db.runAsync(
  'INSERT INTO books (title, author) VALUES (?, ?)',
  'ëª¨ë¹„ë”•',
  'í—ˆë¨¼ ë©œë¹Œ'
);
```

### 3.3. ë°ì´í„° ì¡°íšŒ

#### 3.3.1. í•œ í–‰ë§Œ ì¡°íšŒ

```ts
const row = await db.getFirstAsync('SELECT * FROM books WHERE id = ?', 1);
console.log(row?.title, row?.author);
```

#### 3.3.2. ì—¬ëŸ¬ í–‰ ì¡°íšŒ

```ts
const rows = await db.getAllAsync('SELECT * FROM books');
rows.forEach(row => {
  console.log(row.id, row.title, row.author);
});
```

---

## 4. Prepared Statement (ì¤€ë¹„ëœ ì¿¼ë¦¬)

```ts
const statement = await db.prepareAsync(
  'INSERT INTO books (title, author) VALUES ($title, $author)'
);
try {
  await statement.executeAsync({ $title: 'ë°ë¯¸ì•ˆ', $author: 'í—¤ë¥´ë§Œ í—¤ì„¸' });
  await statement.executeAsync({ $title: '1984', $author: 'ì¡°ì§€ ì˜¤ì›°' });
} finally {
  await statement.finalizeAsync();
}
```

---

## 5. íŠ¸ëœì­ì…˜

```ts
await db.execAsync('BEGIN TRANSACTION;');
// ì—¬ëŸ¬ ì¿¼ë¦¬ ì‹¤í–‰
await db.execAsync('COMMIT;');
```

---

## 6. React Contextì—ì„œ ì‚¬ìš© ì˜ˆì‹œ

```tsx
import * as SQLite from 'expo-sqlite';
import { createContext, useContext, useEffect, useState } from 'react';

const DB_NAME = 'mydb.db';
const SQLiteContext = createContext(null);

export function SQLiteProvider({ children }) {
  const [db, setDb] = useState(null);

  useEffect(() => {
    SQLite.openDatabaseAsync(DB_NAME).then(setDb);
  }, []);

  if (!db) return null; // ë¡œë”© ì¤‘

  return (
    <SQLiteContext.Provider value={db}>
      {children}
    </SQLiteContext.Provider>
  );
}

export function useDb() {
  return useContext(SQLiteContext);
}
```

---

## 7. ì°¸ê³ 

- [ê³µì‹ Expo SQLite ë¬¸ì„œ](https://docs.expo.dev/versions/latest/sdk/sqlite/)
- [API Reference](https://docs.expo.dev/versions/latest/sdk/sqlite/#api)

---

**Tip:**  
- ì›¹ ì§€ì›ì€ ì‹¤í—˜ì ì…ë‹ˆë‹¤. ë„¤ì´í‹°ë¸Œ(iOS/Android)ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.
- ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ í•­ìƒ async/await íŒ¨í„´ì„ ì‚¬ìš©í•˜ì„¸ìš”.

---

ì´ ë¬¸ì„œë¥¼ í”„ë¡œì íŠ¸ ë‚´ `@expo_sqlite.mdc` ë“±ìœ¼ë¡œ ì €ì¥í•´ë‘ë©´,  
íŒ€ì› ëˆ„êµ¬ë‚˜ ìµœì‹  Expo SQLite ì‚¬ìš©ë²•ì„ ë¹ ë¥´ê²Œ ì°¸ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.